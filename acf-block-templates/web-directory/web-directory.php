<?php
/**
 * UDS Web Directory
 *
 * Single block with two display types supported.
 * - 1. Web directory by department ID.
 * - 2. Faculty Rank web directory
 *
 * TODO: Web directory by ASURITE ID + Dept ID (people) & the combination of everything (people_directory)
 *
 * Support for the selection of multiple department IDs implemented by a standard ACF multi-select field.
 *
 * @package Pitchfork_Blocks
 */


/**
 * Get ACF fields and profile data from Search endpoint.
 */
$display 			= get_field( 'uds_webdir_display' );
$department_ids 	= get_field( 'uds_webdir_select_dept' );


// Split the array generated by the multiselect department ids. Convert to string.
$dept_string = implode(',' , $department_ids);


// Echos either a placeholder graphic in the editor or the container div + data attributes for init.
if (! $is_preview ) {
	echo '<div id="pfpeople-web-directory" data-searchtype="' . $display . '" data-depts="' . $dept_string . '"></div>';
} else {
	echo '<div class="web-directory-placeholder"><h2><span class="highlight-black">Web directory placeholder</span></h2></div>';
}
